[pytest]
DJANGO_SETTINGS_MODULE = discussion_platform.test_settings
python_files = tests.py test_*.py *_tests.py
addopts = --reuse-db --cov=core --cov-report=html --cov-report=term-missing -v -m "not playwright"
testpaths = tests
asyncio_mode = auto

# pytest-xdist configuration for parallel execution
# Use: pytest tests/e2e/ -n auto  (auto-detect CPU count)
# Use: pytest tests/e2e/ -n 4     (run with 4 workers)
# Note: E2E tests use --dist loadscope for better database isolation

markers =
    playwright: Frontend UI tests using Playwright (skipped by default in Docker)
    asyncio: Asynchronous tests using asyncio
    browser: Mark test to run on specific browser (chromium, firefox, webkit)
