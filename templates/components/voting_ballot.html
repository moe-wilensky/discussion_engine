<div class="vote-option mb-4">
    <div class="text-sm font-medium mb-2">Your Vote:</div>
    <div class="flex gap-4">
        <label class="flex items-center cursor-pointer">
            <input 
                type="radio" 
                name="vote_{{ parameter }}" 
                value="increase" 
                class="mr-2"
            >
            <span class="flex items-center">
                <svg class="w-4 h-4 text-green-600 mr-1" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v3.586L7.707 9.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 10.586V7z" clip-rule="evenodd"/>
                </svg>
                Increase (+10%)
            </span>
        </label>
        
        <label class="flex items-center cursor-pointer">
            <input 
                type="radio" 
                name="vote_{{ parameter }}" 
                value="no_change" 
                class="mr-2"
                checked
            >
            <span class="flex items-center">
                <svg class="w-4 h-4 text-gray-600 mr-1" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z" clip-rule="evenodd"/>
                </svg>
                No Change
            </span>
        </label>
        
        <label class="flex items-center cursor-pointer">
            <input 
                type="radio" 
                name="vote_{{ parameter }}" 
                value="decrease" 
                class="mr-2"
            >
            <span class="flex items-center">
                <svg class="w-4 h-4 text-red-600 mr-1" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v3.586L7.707 9.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 10.586V7z" clip-rule="evenodd"/>
                </svg>
                Decrease (-10%)
            </span>
        </label>
    </div>
    
    <!-- Current Vote Tally -->
    <div class="mt-2 text-xs text-gray-600" id="tally-{{ parameter }}">
        Current votes: <span class="font-medium">Loading...</span>
    </div>
</div>

<script>
// Load current vote tallies via AJAX
function loadVoteTally() {
    fetch('/api/voting/{{ discussion_id }}/parameter-results/')
        .then(response => response.json())
        .then(data => {
            {% comment %} Update tallies for each parameter {% endcomment %}
            if (data['{{ parameter }}']) {
                const tally = data['{{ parameter }}'];
                document.getElementById('tally-{{ parameter }}').innerHTML = `
                    Current votes: 
                    <span class="font-medium">
                        ↑ ${tally.increase} | — ${tally.no_change} | ↓ ${tally.decrease}
                    </span>
                    of {{ eligible_voters }} eligible voters
                `;
            }
        })
        .catch(err => console.error('Error loading tally:', err));
}

// Load on page load
document.addEventListener('DOMContentLoaded', loadVoteTally);
</script>
